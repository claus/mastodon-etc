---
type: app
title: Emojis Personalizados
publishedAt: '2022-11-26T12:00:00.000Z'
description: Emoji.
---

import { compressEmojiJSON } from 'utils';
import MDXPostLayout from 'components/ui/MDXPostLayout';
import EmojiPicker from 'components/ui/EmojiPicker';

<EmojiPicker categories={props.categories} baseUrl={props.baseUrl} />

export const getStaticProps = async ctx => {
    const postMeta = require('utils/posts').getPostMeta('emoji');
    const domain = ctx.params?.domain ?? 'mastodon.com.br';
    const api = `https://${domain}/api/v1/custom_emojis`;
    const getStaticPropsResponse = props => {
        return {
            revalidate: 60,
            props: {
                domain,
                status: 200,
                ...postMeta,
                ...props,
            },
        };
    };
    try {
        const response = await fetch(api);
        if (response.status >= 400) {
            return getStaticPropsResponse({
                status: response.status,
                statusText: response.statusText,
            });
        }
        const json = await response.json();
        const { baseUrl, emojis: allEmojis } = compressEmojiJSON(json);
        const categories = allEmojis.reduce((acc, emoji) => {
            const { category = '' } = emoji;
            if (!acc[category]) acc[category] = [];
            acc[category].push(emoji);
            return acc;
        }, {});
        return getStaticPropsResponse({
            baseUrl,
            categories,
            status: response.status,
        });
    } catch (e) {
        return getStaticPropsResponse({
            status: 500,
            statusText: e.message,
        });
    }
};

export default ({ children, ...props }) => (
    <MDXPostLayout {...props}>{children}</MDXPostLayout>
);
